"use strict";(self["webpackChunkjing_shop_main"]=self["webpackChunkjing_shop_main"]||[]).push([[940],{3714:function(a,s,t){function e(a){const s=parseInt(a,10);return`${s.toFixed(0).replace(/./g,((a,s,t)=>s&&"."!==a&&(t.length-s)%3===0?`, ${a}`.replace(/\s/g,""):a))}`}t.d(s,{A:function(){return e}})},2940:function(a,s,t){t.r(s),t.d(s,{default:function(){return G}});var e=t(6252),l=t(3577);const r=a=>((0,e.dD)("data-v-2c0cb7b0"),a=a(),(0,e.Cn)(),a),c={class:"checkOut"},n={class:"container"},i=(0,e.uE)('<h3 data-v-2c0cb7b0>結帳 / <span data-v-2c0cb7b0>填寫收件人資料</span></h3><div class="checkOutLine" data-v-2c0cb7b0><div class="text" data-v-2c0cb7b0><p data-v-2c0cb7b0>填寫資料</p><p data-v-2c0cb7b0>確認資料</p><p data-v-2c0cb7b0>進行付款</p><p data-v-2c0cb7b0>完成</p></div><div class="line" data-v-2c0cb7b0><div class="ball ball01 active" data-v-2c0cb7b0></div><div class="ball ball02" data-v-2c0cb7b0></div><div class="ball ball03" data-v-2c0cb7b0></div><div class="ball ball04" data-v-2c0cb7b0></div></div></div>',2),d={class:"productList_final mobileNone"},o=r((()=>(0,e._)("thead",null,[(0,e._)("tr",{class:"title"},[(0,e._)("th",{colspan:"7"},"訂單明細")]),(0,e._)("tr",null,[(0,e._)("th",null,"商品名稱"),(0,e._)("th",null,"尺寸"),(0,e._)("th",null,"顏色"),(0,e._)("th",null,"數量"),(0,e._)("th",null,"單價"),(0,e._)("th",null,"小計")])],-1))),u=r((()=>(0,e._)("td",null,"F",-1))),m={class:"price"},p={class:"totalPrice"},_={colspan:"7"},b={class:"line_through"},h={class:"sale"},v={class:"userForm"},f={class:"userName"},g={class:"error userNameError"},w={class:"phone"},y={class:"error phoneError"},N={class:"mail"},W={class:"error mailError"},D={class:"address"},z={class:"error addressError"},x={class:"textArea"},L={class:"formBtn"},k=r((()=>(0,e._)("button",{class:"resetBtn",type:"reset"},"重填",-1))),E=["disabled"];function q(a,s,t,r,q,C){const F=(0,e.up)("LoadingComponent"),T=(0,e.up)("productFinalMobile"),$=(0,e.up)("VField"),j=(0,e.up)("ErrorMessage"),S=(0,e.up)("VForm");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(F,{active:q.isLoading},null,8,["active"]),(0,e._)("div",c,[(0,e._)("div",n,[i,(0,e._)("div",d,[(0,e._)("table",null,[o,(0,e._)("tbody",null,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(q.carts.carts,(a=>((0,e.wg)(),(0,e.iD)("tr",{key:a.id},[(0,e._)("td",null,(0,l.zw)(a.product.title),1),u,(0,e._)("td",null,(0,l.zw)(a.color),1),(0,e._)("td",null,(0,l.zw)(a.qty),1),(0,e._)("td",m,"NTD "+(0,l.zw)(C.currency(a.product.price)),1),(0,e._)("td",p,"NTD "+(0,l.zw)(C.currency(a.final_total)),1)])))),128))]),(0,e._)("tfoot",null,[(0,e._)("tr",null,[(0,e._)("td",_,[(0,e._)("span",b,"總價NTD "+(0,l.zw)(C.currency(q.carts.total)),1),(0,e._)("span",h,"折扣價NTD "+(0,l.zw)(C.currency(q.carts.final_total)),1)])])])])]),(0,e.Wm)(T,{class:"mobileShow","carts-list":q.carts},null,8,["carts-list"]),(0,e._)("div",v,[(0,e.Wm)(S,{onSubmit:C.formSubmit},{default:(0,e.w5)((({meta:a,errors:s})=>[(0,e._)("div",f,[(0,e.Wm)($,{class:(0,l.C_)(["firstName",{"is-invalid":s["firstName"]}]),name:"firstName",label:"姓氏",type:"text",placeholder:"姓氏",rules:"required"},null,8,["class"]),(0,e.Wm)($,{class:"lastName",name:"lastName",label:"名字",type:"text",placeholder:"名字",rules:"required"})]),(0,e._)("div",g,[(0,e.Wm)(j,{name:"firstName"}),(0,e.Wm)(j,{name:"lastName",class:"lastNameError"})]),(0,e._)("div",w,[(0,e.Wm)($,{type:"tel",name:"tel",label:"手機號碼",placeholder:"手機號碼",rules:"required|numeric|min:10|max:10"})]),(0,e._)("div",y,[(0,e.Wm)(j,{name:"tel"})]),(0,e._)("div",N,[(0,e.Wm)($,{type:"mail",name:"email",placeholder:"E-mail",rules:"required|email"})]),(0,e._)("div",W,[(0,e.Wm)(j,{name:"email"})]),(0,e._)("div",D,[(0,e.Wm)($,{class:"addNum",name:"addressNum",label:"郵遞區號",type:"text",placeholder:"郵遞區號",rules:"required|numeric|min:3|max:6"}),(0,e.Wm)($,{type:"text",name:"address",label:"地址",placeholder:"地址",rules:"required"})]),(0,e._)("div",z,[(0,e.Wm)(j,{name:"addressNum"}),(0,e.Wm)(j,{name:"address",class:"addressError"})]),(0,e._)("div",x,[(0,e.Wm)($,{name:"message"},{default:(0,e.w5)((({field:a})=>[(0,e._)("textarea",(0,e.dG)(a,{cols:"30",rows:"10",placeholder:"備註..."}),null,16)])),_:1})]),(0,e._)("div",L,[k,(0,e._)("button",{class:(0,l.C_)(["submitBtn",{disabled:!a.valid}]),disabled:!a.valid},"下一步",10,E)])])),_:1},8,["onSubmit"])])])])],64)}t(7658);var C=t(3714);const F={class:"productList_final"},T=(0,e._)("thead",null,[(0,e._)("tr",{class:"title"},[(0,e._)("th",{colspan:"7"},"訂單明細")])],-1),$=(0,e._)("span",null,"F",-1),j={class:"text-right"},S={class:"fw-b"},A={colspan:"7"},O={class:"line_through"},B={class:"sale"};function H(a,s,t,r,c,n){return(0,e.wg)(),(0,e.iD)("div",F,[(0,e._)("table",null,[T,(0,e._)("tbody",null,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(t.cartsList.carts,(a=>((0,e.wg)(),(0,e.iD)("tr",{key:a.id},[(0,e._)("td",null,[(0,e._)("p",null,[(0,e._)("span",null,(0,l.zw)(a.product.title),1),$,(0,e._)("span",null,(0,l.zw)(a.color),1),(0,e._)("span",null,"數量 "+(0,l.zw)(a.qty),1)]),(0,e._)("p",j,[(0,e._)("span",null,"單價 NTD "+(0,l.zw)(n.currency(a.product.price)),1),(0,e._)("span",S,"小計 NTD "+(0,l.zw)(n.currency(a.final_total)),1)])])])))),128))]),(0,e._)("tfoot",null,[(0,e._)("tr",null,[(0,e._)("td",A,[(0,e._)("span",O,"總價NTD "+(0,l.zw)(n.currency(t.cartsList.total)),1),(0,e._)("span",B,"折扣價NTD "+(0,l.zw)(n.currency(t.cartsList.final_total)),1)])])])])])}var I={props:{cartsList:{type:Object,default(){return{}}}},methods:{currency:C.A}},M=t(3744);const Y=(0,M.Z)(I,[["render",H]]);var K=Y,V={components:{productFinalMobile:K},data(){return{carts:{},form:{user:{name:"",email:"",tel:"",address:""},message:""},isLoading:!1}},methods:{currency:C.A,getCarts(){this.isLoading=!0;const a="https://vue3-course-api.hexschool.io/api/jingyan/cart";this.$http.get(a).then((a=>{this.carts=a.data.data,this.isLoading=!1,console.log(this.carts)}))},formSubmit(a){this.form.user.name=a.firstName+a.lastName,this.form.user.email=a.email,this.form.user.tel=a.tel,this.form.user.address=a.addressNum+a.address,this.form.message=a.message,console.log("user",this.form.user),console.log("msg",this.form.message);const s=this.form,t="https://vue3-course-api.hexschool.io/api/jingyan/order";this.$http.post(t,{data:s}).then((a=>{console.log(a),a.data.success?this.$router.push(`/checkOut/${a.data.orderId}`):alert(a.data.message)}))}},created(){this.getCarts()}};const Z=(0,M.Z)(V,[["render",q],["__scopeId","data-v-2c0cb7b0"]]);var G=Z}}]);
//# sourceMappingURL=940.eae5781f.js.map