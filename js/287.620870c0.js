(self["webpackChunkjing_shop_main"]=self["webpackChunkjing_shop_main"]||[]).push([[287],{7424:function(t,e,i){
/*!
  * Bootstrap modal.js v5.3.0-alpha1 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(e,s){t.exports=s(i(4072),i(9286),i(8737),i(1810),i(5695),i(1358),i(744),i(1127))})(0,(function(t,e,i,s,n,o,a,l){"use strict";const r="modal",c="bs.modal",d=`.${c}`,h=".data-api",u="Escape",_=`hide${d}`,p=`hidePrevented${d}`,m=`hidden${d}`,g=`show${d}`,f=`shown${d}`,b=`resize${d}`,v=`click.dismiss${d}`,y=`mousedown.dismiss${d}`,w=`keydown.dismiss${d}`,k=`click${d}${h}`,A="modal-open",C="fade",E="show",D="modal-static",M=".modal.show",T=".modal-dialog",$=".modal-body",x='[data-bs-toggle="modal"]',L={backdrop:!0,focus:!0,keyboard:!0},N={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class j extends n{constructor(t,e){super(t,e),this._dialog=i.findOne(T,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new s,this._addEventListeners()}static get Default(){return L}static get DefaultType(){return N}static get NAME(){return r}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||this._isTransitioning)return;const i=e.trigger(this._element,g,{relatedTarget:t});i.defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(A),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){if(!this._isShown||this._isTransitioning)return;const t=e.trigger(this._element,_);t.defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(E),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated()))}dispose(){for(const t of[window,this._dialog])e.off(t,d);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new o({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new a({trapElement:this._element})}_showElement(s){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=i.findOne($,this._dialog);n&&(n.scrollTop=0),t.reflow(this._element),this._element.classList.add(E);const o=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,e.trigger(this._element,f,{relatedTarget:s})};this._queueCallback(o,this._dialog,this._isAnimated())}_addEventListeners(){e.on(this._element,w,(t=>{if(t.key===u)return this._config.keyboard?(t.preventDefault(),void this.hide()):void this._triggerBackdropTransition()})),e.on(window,b,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),e.on(this._element,y,(t=>{e.one(this._element,v,(e=>{this._element===t.target&&this._element===e.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(A),this._resetAdjustments(),this._scrollBar.reset(),e.trigger(this._element,m)}))}_isAnimated(){return this._element.classList.contains(C)}_triggerBackdropTransition(){const t=e.trigger(this._element,p);if(t.defaultPrevented)return;const i=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;"hidden"===s||this._element.classList.contains(D)||(i||(this._element.style.overflowY="hidden"),this._element.classList.add(D),this._queueCallback((()=>{this._element.classList.remove(D),this._queueCallback((()=>{this._element.style.overflowY=s}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._scrollBar.getWidth(),s=i>0;if(s&&!e){const e=t.isRTL()?"paddingLeft":"paddingRight";this._element.style[e]=`${i}px`}if(!s&&e){const e=t.isRTL()?"paddingRight":"paddingLeft";this._element.style[e]=`${i}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const i=j.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof i[t])throw new TypeError(`No method named "${t}"`);i[t](e)}}))}}return e.on(document,k,x,(function(s){const n=i.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&s.preventDefault(),e.one(n,g,(i=>{i.defaultPrevented||e.one(n,m,(()=>{t.isVisible(this)&&this.focus()}))}));const o=i.findOne(M);o&&j.getInstance(o).hide();const a=j.getOrCreateInstance(n);a.toggle(this)})),l.enableDismissTrigger(j),t.defineJQueryPlugin(j),j}))},1358:function(t,e,i){
/*!
  * Bootstrap backdrop.js v5.3.0-alpha1 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(e,s){t.exports=s(i(9286),i(4072),i(4547))})(0,(function(t,e,i){"use strict";const s="backdrop",n="fade",o="show",a=`mousedown.bs.${s}`,l={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},r={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class c extends i{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return l}static get DefaultType(){return r}static get NAME(){return s}show(t){if(!this._config.isVisible)return void e.execute(t);this._append();const i=this._getElement();this._config.isAnimated&&e.reflow(i),i.classList.add(o),this._emulateAnimation((()=>{e.execute(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(o),this._emulateAnimation((()=>{this.dispose(),e.execute(t)}))):e.execute(t)}dispose(){this._isAppended&&(t.off(this._element,a),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(n),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=e.getElement(t.rootElement),t}_append(){if(this._isAppended)return;const i=this._getElement();this._config.rootElement.append(i),t.on(i,a,(()=>{e.execute(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){e.executeAfterTransition(t,this._getElement(),this._config.isAnimated)}}return c}))},744:function(t,e,i){
/*!
  * Bootstrap focustrap.js v5.3.0-alpha1 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(e,s){t.exports=s(i(9286),i(8737),i(4547))})(0,(function(t,e,i){"use strict";const s="focustrap",n="bs.focustrap",o=`.${n}`,a=`focusin${o}`,l=`keydown.tab${o}`,r="Tab",c="forward",d="backward",h={autofocus:!0,trapElement:null},u={autofocus:"boolean",trapElement:"element"};class _ extends i{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return h}static get DefaultType(){return u}static get NAME(){return s}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),t.off(document,o),t.on(document,a,(t=>this._handleFocusin(t))),t.on(document,l,(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,t.off(document,o))}_handleFocusin(t){const{trapElement:i}=this._config;if(t.target===document||t.target===i||i.contains(t.target))return;const s=e.focusableChildren(i);0===s.length?i.focus():this._lastTabNavDirection===d?s[s.length-1].focus():s[0].focus()}_handleKeydown(t){t.key===r&&(this._lastTabNavDirection=t.shiftKey?d:c)}}return _}))},1810:function(t,e,i){
/*!
  * Bootstrap scrollbar.js v5.3.0-alpha1 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(e,s){t.exports=s(i(8737),i(3175),i(4072))})(0,(function(t,e,i){"use strict";const s=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",n=".sticky-top",o="padding-right",a="margin-right";class l{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,o,(e=>e+t)),this._setElementAttributes(s,o,(e=>e+t)),this._setElementAttributes(n,a,(e=>e-t))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,o),this._resetElementAttributes(s,o),this._resetElementAttributes(n,a)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,i){const s=this.getWidth(),n=t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+s)return;this._saveInitialAttribute(t,e);const n=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${i(Number.parseFloat(n))}px`)};this._applyManipulationCallback(t,n)}_saveInitialAttribute(t,i){const s=t.style.getPropertyValue(i);s&&e.setDataAttribute(t,i,s)}_resetElementAttributes(t,i){const s=t=>{const s=e.getDataAttribute(t,i);null!==s?(e.removeDataAttribute(t,i),t.style.setProperty(i,s)):t.style.removeProperty(i)};this._applyManipulationCallback(t,s)}_applyManipulationCallback(e,s){if(i.isElement(e))s(e);else for(const i of t.find(e,this._element))s(i)}}return l}))},3714:function(t,e,i){"use strict";function s(t){const e=parseInt(t,10);return`${e.toFixed(0).replace(/./g,((t,e,i)=>e&&"."!==t&&(i.length-e)%3===0?`, ${t}`.replace(/\s/g,""):t))}`}i.d(e,{A:function(){return s}})},287:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return et}});var s=i(6252),n=i(9963),o=i(3577);const a=t=>((0,s.dD)("data-v-c76ead98"),t=t(),(0,s.Cn)(),t),l={class:"cart"},r={class:"container"},c=a((()=>(0,s._)("h3",null,"購物車",-1))),d={class:"cartContent"},h={class:"cartList"},u={class:"deleteCarts"},_={key:0},p={class:"cartItem"},m={class:"cartItemImg"},g=["src","alt"],f={class:"cartItemContent"},b={class:"title"},v={class:"size"},y=["onChange","onUpdate:modelValue"],w=(0,s.uE)('<option value="1" data-v-c76ead98>1</option><option value="2" data-v-c76ead98>2</option><option value="3" data-v-c76ead98>3</option><option value="4" data-v-c76ead98>4</option><option value="5" data-v-c76ead98>5</option><option value="6" data-v-c76ead98>6</option><option value="7" data-v-c76ead98>7</option><option value="8" data-v-c76ead98>8</option><option value="9" data-v-c76ead98>9</option><option value="10" data-v-c76ead98>10</option>',10),k=[w],A={key:0,class:"sale_price"},C=["onClick"],E={class:"cartInformation"},D=a((()=>(0,s._)("h4",null,"訂單摘要",-1))),M={class:"cartInformationContent"},T=a((()=>(0,s._)("option",{value:"",selected:"selected",disabled:""},"請選擇運送方式",-1))),$=a((()=>(0,s._)("option",{value:"711"},"7-11取貨付款",-1))),x=a((()=>(0,s._)("option",{value:"blackCat"},"宅配",-1))),L=[T,$,x],N={class:"couponList"},j={key:0,class:"couponMsg"},B=a((()=>(0,s._)("br",null,null,-1))),I={key:0,type:"button",class:"cartNextBtn disabled"};function U(t,e,i,a,w,T){const $=(0,s.up)("LoadingComponent"),x=(0,s.up)("router-link"),U=(0,s.up)("deleteModal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)($,{active:w.isLoading},null,8,["active"]),(0,s._)("div",l,[(0,s._)("div",r,[c,(0,s._)("div",d,[(0,s._)("div",h,[(0,s._)("div",u,[(0,s._)("a",{href:"#",onClick:e[0]||(e[0]=(0,n.iM)(((...t)=>T.openDeleteModal&&T.openDeleteModal(...t)),["prevent"]))},"刪除全部購物車")]),0===w.carts.total?((0,s.wg)(),(0,s.iD)("p",_,"暫時無購物清單，請至商城選購")):(0,s.kq)("",!0),(0,s._)("ul",p,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(w.carts.carts,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.id},[(0,s._)("div",m,[(0,s._)("img",{src:t.product.imgUrl,alt:t.product.title},null,8,g)]),(0,s._)("div",f,[(0,s._)("p",b,(0,o.zw)(t.product.title),1),(0,s._)("p",v,"F / "+(0,o.zw)(t.color),1),(0,s.wy)((0,s._)("select",{class:"num",onChange:e=>T.updateCarts(t),"onUpdate:modelValue":e=>t.qty=e},k,40,y),[[n.bM,t.qty,void 0,{number:!0}]]),(0,s._)("p",{class:(0,o.C_)(["price",{"line-through":t.coupon}])},"售價NTD "+(0,o.zw)(T.currency(t.total)),3),t.coupon?((0,s.wg)(),(0,s.iD)("p",A,[(0,s.Uk)("折扣價"),(0,s._)("span",null,"NTD "+(0,o.zw)(T.currency(Math.ceil(t.final_total))),1)])):(0,s.kq)("",!0)]),(0,s._)("button",{type:"button",class:"delBtn",onClick:e=>T.deleteCart(t)},"刪除",8,C)])))),128))])]),(0,s._)("div",E,[D,(0,s._)("div",M,[(0,s._)("p",null,[(0,s.Uk)("商品總計 "),(0,s._)("span",null,"NTD "+(0,o.zw)(T.currency(w.carts.total))+"元",1)]),(0,s._)("p",null,[(0,s.Uk)("運送方式 "),(0,s._)("span",null,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>w.transport=t)},L,512),[[n.bM,w.transport]])])]),(0,s._)("p",N,[(0,s.Uk)("使用優惠券 "),(0,s._)("span",null,[(0,s.wy)((0,s._)("input",{type:"text",placeholder:"輸入折扣碼","onUpdate:modelValue":e[2]||(e[2]=t=>w.coupon=t)},null,512),[[n.nr,w.coupon]]),(0,s._)("button",{type:"button",onClick:e[3]||(e[3]=(...t)=>T.useCoupon&&T.useCoupon(...t))},"使用")])]),w.couponMsg.message?((0,s.wg)(),(0,s.iD)("p",j,(0,o.zw)(w.couponMsg.message),1)):(0,s.kq)("",!0),B,(0,s._)("p",null,[(0,s.Uk)("結帳總金額 "),(0,s._)("span",null,"NTD "+(0,o.zw)(T.currency(Math.ceil(w.carts.final_total)))+"元",1)])]),0===w.carts.total?((0,s.wg)(),(0,s.iD)("button",I,"前往結帳")):((0,s.wg)(),(0,s.j4)(x,{key:1,to:"/checkOut",class:"cartNextBtn"},{default:(0,s.w5)((()=>[(0,s.Uk)("前往結帳")])),_:1}))])])])]),(0,s.Wm)(U,{ref:"deleteModal",onDeleteCarts:T.deleteAllCarts},null,8,["onDeleteCarts"])],64)}var z=i(3714);const P={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",ref:"Modal"},V={class:"modal-dialog"},q={class:"modal-content"},W=(0,s._)("div",{class:"modal-header"},[(0,s._)("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"確定要刪除全部購物車項目?"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),F=(0,s._)("div",{class:"modal-body"},[(0,s.Uk)("是否確定要刪除「全部購物車」項目?"),(0,s._)("br"),(0,s.Uk)("刪除後商品將無法復原，請謹慎操作。")],-1),O={class:"modal-footer"},S=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function H(t,e,i,n,o,a){return(0,s.wg)(),(0,s.iD)("div",P,[(0,s._)("div",V,[(0,s._)("div",q,[W,F,(0,s._)("div",O,[S,(0,s._)("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=e=>t.$emit("delete-carts"))},"確定刪除")])])])],512)}var R=i(7424),Y=i.n(R),K={methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()},resetTempProduct(){this.tempProduct={}}},mounted(){this.modal=new(Y())(this.$refs.Modal)}},Q={data(){return{modal:{}}},mixins:[K]},Z=i(3744);const J=(0,Z.Z)(Q,[["render",H]]);var G=J,X={components:{deleteModal:G},data(){return{carts:{},total:0,coupon:"",couponMsg:"",final_total:0,transport:"",isLoading:!1}},inject:["emitter"],methods:{currency:z.A,getCarts(){const t="https://vue3-course-api.hexschool.io/api/jingyan/cart";this.$http.get(t).then((t=>{this.carts=t.data.data,console.log(this.carts)}))},deleteAllCarts(){this.isLoading=!0;const t=this.$refs.deleteModal,e="https://vue3-course-api.hexschool.io/api/jingyan/carts";this.$http.delete(e).then((e=>{e.data.success&&this.emitter.emit("push-message",{style:"success",title:"已刪除購物車"}),this.isLoading=!1,t.hideModal(),this.getCarts()}))},deleteCart(t){const e=`https://vue3-course-api.hexschool.io/api/jingyan/cart/${t.id}`;this.$http.delete(e).then((t=>{console.log(t),this.getCarts()}))},openDeleteModal(){const t=this.$refs.deleteModal;t.showModal()},updateCarts(t){const e=`https://vue3-course-api.hexschool.io/api/jingyan/cart/${t.id}`,i={product_id:t.product.id,qty:t.qty};this.$http.put(e,{data:i}).then((t=>{this.carts=t.data.data,this.getCarts()}))},useCoupon(){const t="https://vue3-course-api.hexschool.io/api/jingyan/coupon",e={code:this.coupon};this.$http.post(t,{data:e}).then((t=>{console.log(t),this.couponMsg=t.data,this.coupon="",this.getCarts()}))}},created(){this.getCarts()}};const tt=(0,Z.Z)(X,[["render",U],["__scopeId","data-v-c76ead98"]]);var et=tt}}]);
//# sourceMappingURL=287.620870c0.js.map